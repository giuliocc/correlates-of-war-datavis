<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Correlates of War Datavis</title>
</head>
    <body>
        <script src="./source/node_modules/d3/d3.js"></script>
        <script src="./source/node_modules/d3-cloud/build/d3.layout.cloud.js"></script>
        <script src="./source/datasets/war_texts_dataset/inter_war_texts.json"></script>
        <script src="./source/datasets/war_dataset/inter_war_data.json"></script>
        <script src="./source/node_modules/wordcloud/wordcloud.js"></script>
        <script src="./source/node_modules/gantt/gantt.js"></script>
        <script src="./source/node_modules/gantt/gantt_refact.js"></script>
        <script src="./source/node_modules/utils.js"></script>
    
        <script>
            var mySVG = d3.select("body")
                .append("svg")
                .attr("width","1000")
                .attr("height","600");

            var wars = [];
            var warNames = [];
            var warClasses = [];

            d3.json("https://raw.githubusercontent.com/giuliocc/correlates-of-war-visualizacao-2017-1/master/source/datasets/war_dataset/inter_war_data.json", function(json){
                var data = json.war_data;
                // var data = war_data;
                
                var dataset = generateClassesDataset(data, 15)

                for (var i = 0; i <= dataset.length - 1; i++) {
                    if(!warClasses.includes(dataset[i].class))
                        warClasses.push(dataset[i].class);
                }

                //var gantt = d3.gantt().height(450).width(800).warNames(warNames).warClasses(warClasses);
                //gantt(wars)
                var gantt = new Gantt({
                    height: 450, 
                    width: 800, 
                    warClasses: warClasses.reverse(),
                    tickFormat:"%Y-%m-%d", 
                    container: mySVG});
                gantt.display(dataset);

            });
                
        </script>

    </body>
</html>
