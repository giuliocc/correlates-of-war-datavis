class Legend{
    constructor(args){
        this.domain = args.domain;
        this.x = args.x;
        this.y = args.y;
        this.height = args.height;
        this.width = args.width;
        this.colors = args.colors;
        this.shape = args.shape;
        this.container = args.container;
    }

    display_legend(){
        if (this.shape == 'rect'){
            var linear = d3.scaleLinear()
                .domain(this.domain)
                .range(this.colors);


            var legendLinear = d3.legendColor()
                .shapeWidth(this.width/6.0104)
                .orient('horizontal')
                .labelFormat(".0f")
                .title("# of participants")
                .titleWidth(this.width/1.20208)
                .scale(linear);

            this.canvas = this.container.append("g")
                .attr("transform", "translate("+ this.x +","+ this.y +")");

            this.canvas.append("rect")
                .attr("x", -(this.width/24.0416))
                .attr("y", -(this.width/9.246769231))
                .attr("width", this.width)
                .attr("height", this.height)
                .attr("fill", "white")
                .attr("stroke", "black")
                .attr("stroke-width", 0.1);

            this.canvas.append("g")
                .attr("class", "legendLinear");

            this.canvas.select(".legendLinear")
                .call(legendLinear); 
        }
        else if(this.shape == 'circle'){

            var linearSize = d3.scaleLinear().domain(this.domain).range([3, 9]);
            var linearColor = d3.scaleLinear().domain(this.domain).range(this.colors)

            var legendSize = d3.legendSize()
                .scale(linearSize)
                .shape('circle')
                .shapePadding(this.width/8.7573)
                .labelOffset(this.width/13.136)
                .orient('horizontal')
                .title("# of participants")
                .titleWidth(this.width/1.3136);

            
            this.canvas = this.container.append("g")
                .attr("transform", "translate("+ this.x +","+ this.y +")");

            this.canvas.append("rect")
                .attr("x", -(this.width/26.272))
                .attr("y", -(this.width/10.104615385))
                .attr("width", this.width)
                .attr("height", this.height)
                .attr("fill", "white")
                .attr("stroke", "black")
                .attr("stroke-width", 0.1);

            this.canvas.append("g")
                .attr("class", "legendSize")

            this.canvas.select(".legendSize")
                .call(legendSize);


            this.canvas.selectAll(".swatch")
                .attr("fill", function(){return linearColor(linearSize.invert(this.attributes.r.value));});
        }
    }
}
